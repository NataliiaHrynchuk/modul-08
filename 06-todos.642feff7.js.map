{"version":3,"sources":["js/06-todos.js"],"names":["console","log","itemTemplate","id","isDone","text","items","refs","ul","document","querySelector","form","loadData","JSON","parse","localStorage","getItem","error","message","saveData","setItem","stringify","handleSubmit","event","preventDefault","target","elements","value","newItem","Date","now","toString","push","saveAndRender","reset","toggleItem","map","item","deleteItem","filter","handleListClick","currentTarget","parent","closest","dataset","nodeName","renderList","list","join","innerHTML","insertAdjacentHTML","loadAndRender","addEventListener"],"mappings":";AAAAA,QAAQC,IAAI,cAEZ,MAAMC,EAAe,EAAGC,GAAAA,EAAIC,OAAAA,EAAQC,KAAAA,uBACrBF,8CAEcC,EAAS,UAAY,oBACtCC,oDAKZ,IAAIC,EAAQ,GASZ,MAAMC,EAAO,CACXC,GAAIC,SAASC,cAAc,MAC3BC,KAAMF,SAASC,cAAc,SAGzBE,EAAW,KACX,IACFN,EAAQO,KAAKC,MAAMC,aAAaC,QAAQ,UACxC,MAAOC,GACPX,EAAQ,GACRN,QAAQC,IAAIgB,EAAMC,WAIhBC,EAAW,KACfJ,aAAaK,QAAQ,QAASP,KAAKQ,UAAUf,KAGzCgB,EAAgBC,IACpBA,EAAMC,iBAEAnB,MAAAA,EAAOkB,EAAME,OAAOC,SAASrB,KAAKsB,MAClCC,EAAU,CACdzB,GAAI0B,KAAKC,MAAMC,WACf1B,KAAAA,EACAD,QAAQ,GAGVE,EAAM0B,KAAKJ,GACXK,IACA1B,EAAKI,KAAKuB,SAGNC,EAAchC,IAClBG,EAAQA,EAAM8B,IAAKC,GACjBA,EAAKlC,KAAOA,EACR,IACKkC,EACHjC,QAASiC,EAAKjC,QAEhBiC,IAIFC,EAAcnC,IAClBG,EAAQA,EAAMiC,OAAQF,GAASA,EAAKlC,KAAOA,IAGvCqC,EAAmBjB,IACnBA,GAAAA,EAAME,SAAWF,EAAMkB,cAAe,OAEpCC,MAAAA,EAASnB,EAAME,OAAOkB,QAAQ,OAC9B,GAAExC,GAAOuC,EAAOE,QAEdrB,OAAAA,EAAME,OAAOoB,UACd,IAAA,QACHV,EAAWhC,GACX,MAEG,IAAA,SACHmC,EAAWnC,GAOf8B,KAGIa,EAAa,KACXC,MAAAA,EAAOzC,EAAM8B,IAAIlC,GAAc8C,KAAK,IAE1CzC,EAAKC,GAAGyC,UAAY,GACpB1C,EAAKC,GAAG0C,mBAAmB,YAAaH,IAGpCd,EAAgB,KA9DpBlB,aAAaK,QAAQ,QAASP,KAAKQ,UAAUf,IAgE7CwC,KAGIK,EAAgB,KACpBvC,IACAkC,KAGFvC,EAAKI,KAAKyC,iBAAiB,SAAU9B,GACrCf,EAAKC,GAAG4C,iBAAiB,QAASZ,GALhC5B,IACAkC","file":"06-todos.642feff7.js","sourceRoot":"../src","sourcesContent":["console.log('Module 8.2');\n\nconst itemTemplate = ({ id, isDone, text }) => `\n<li data-id=\"${id}\">\n  <label>\n    <input type=\"checkbox\" ${isDone ? 'checked' : ''} />\n    <span>${text}</span>\n  </label>\n  <button>x</button>\n</li>`;\n\nlet items = [];\n// let items = [\n//   { id: '1', text: 'sdfgsg', isDone: false },\n//   { id: '2', text: 'ery', isDone: true },\n//   { id: '3', text: 'xcvb', isDone: false },\n//   { id: '4', text: 'asdf', isDone: true },\n//   { id: '5', text: 'uoi', isDone: false },\n// ];\n\nconst refs = {\n  ul: document.querySelector('ul'),\n  form: document.querySelector('form'),\n};\n\nconst loadData = () => {\n  try {\n    items = JSON.parse(localStorage.getItem('todos'));\n  } catch (error) {\n    items = [];\n    console.log(error.message);\n  }\n};\n\nconst saveData = () => {\n  localStorage.setItem('todos', JSON.stringify(items));\n};\n\nconst handleSubmit = (event) => {\n  event.preventDefault();\n\n  const text = event.target.elements.text.value;\n  const newItem = {\n    id: Date.now().toString(),\n    text,\n    isDone: false,\n  };\n\n  items.push(newItem);\n  saveAndRender();\n  refs.form.reset();\n};\n\nconst toggleItem = (id) => {\n  items = items.map((item) =>\n    item.id === id\n      ? {\n          ...item,\n          isDone: !item.isDone,\n        }\n      : item,\n  );\n};\n\nconst deleteItem = (id) => {\n  items = items.filter((item) => item.id !== id);\n};\n\nconst handleListClick = (event) => {\n  if (event.target === event.currentTarget) return;\n\n  const parent = event.target.closest('li');\n  const { id } = parent.dataset;\n\n  switch (event.target.nodeName) {\n    case 'INPUT':\n      toggleItem(id);\n      break;\n\n    case 'BUTTON':\n      deleteItem(id);\n      break;\n\n    default:\n      break;\n  }\n\n  saveAndRender();\n};\n\nconst renderList = () => {\n  const list = items.map(itemTemplate).join('');\n\n  refs.ul.innerHTML = '';\n  refs.ul.insertAdjacentHTML('beforeend', list);\n};\n\nconst saveAndRender = () => {\n  saveData();\n  renderList();\n};\n\nconst loadAndRender = () => {\n  loadData();\n  renderList();\n};\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.ul.addEventListener('click', handleListClick);\n\nloadAndRender();\n\n// -------- question --------\n// const person = {\n//   age: 10,\n\n//   setAge(newAge) {\n//     this.age = newAge;\n//   },\n\n//   refreshAge(userId) {\n//     const context = this;\n\n//     fetchAgeFromDb(function (newAge) {\n//       context.setAge(newAge);\n//     });\n//   },\n// };\n\n// function fetchAgeFromDb(cb) {\n//   cb(20);\n// }\n\n// person.refreshAge();\n\n// console.log(person.age);"]}